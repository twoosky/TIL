# 프록시 패턴
* 프록시 패턴은 접근 제어가 목적이고 데코레이터 패턴 새로운 기능 추가가 목적으로 둘다 프록시를 사용하긴함
* 프록시 패턴은 실제 서비스 메서드의 반환 값을 수정하는 게 아니라 별도 로직을 수행하기 위해 사용

**프록시 패턴 예제 코드**
```java
public interface Subject {
   String operation();
}
@Slf4j
public class RealSubject implements Subject {
   
   @Override
   public String operation() {
      log.info("실제 객체 호출"); 
      sleep(1000);
      return "data";
   }

   private void sleep(int millis) {
      try {
         Thread.sleep(millis);
      } catch (InterruptedException e) {
          e.printStackTrace(); 
      }
   } 
}
```
```java
@Slf4j
public class CacheProxy implements Subject {
   private Subject target;
   private String cacheValue;

   public CacheProxy(Subject target) { 
      this.target = target;
   }
   
   @Override
   public String operation() {
      log.info("프록시 호출");
      
      if (cacheValue == null) {
         cacheValue = target.operation(); 
      }
      return cacheValue;
   }
}
```
```java
public class ProxyPatternClient {

   private Subject subject;
   
   public ProxyPatternClient(Subject subject) { 
      this.subject = subject;
   }
   
   public void execute() { 
      subject.operation();
   } 
}
 public class ProxyPatternTest {

   @Test
   void noProxyTest() {
      RealSubject realSubject = new RealSubject();
      ProxyPatternClient client = new ProxyPatternClient(realSubject); 
      client.execute();
      client.execute();
      client.execute();
   } 

   @Test
   void cacheProxyTest() {
      
      Subject realSubject = new RealSubject();
      Subject cacheProxy = new CacheProxy(realSubject); // 프록시
      
      ProxyPatternClient client = new ProxyPatternClient(cacheProxy); 
      client.execute();
      client.execute();
      client.execute();
   }
}
```

## 데코레이터 패턴
* 프록시 패턴은 클라이언트가 최종적으로 돌려 받는 반환 값을 조작하지 않고 전달하는 반면, 데코레이터 패턴은 클라이언트가 받는 반환 값에 장식을 덧붙임

**데코레이터 패턴 예제 코드**
```java
@Slf4j
public class RealComponent implements Component {
   
   @Override
   public String operation() {
      log.info("RealComponent 실행");
      return "data";
   }
}
```
```java
@Slf4j
public class MessageDecorator implements Component {
   private Component component;
   
   public MessageDecorator(Component component) { 
      this.component = component;
   }
   
   @Override
   public String operation() {
      log.info("MessageDecorator 실행");
      String result = component.operation();
      String decoResult = "*****" + result + "*****"; 
      log.info("MessageDecorator 꾸미기 적용 전={}, 적용 후={}", result, decoResult);
      return decoResult;
   }
}
```
```java
@Slf4j
public class DecoratorPatternClient {
   private Component component;
   
   public DecoratorPatternClient(Component component) { 
      this.component = component;
   }
   
   public void execute() {
      String result = component.operation(); 
      log.info("result={}", result);
   } 
}
```
```java
@Slf4j
public class DecoratorPatternTest {
   
   @Test
   void noDecorator() {
      Component realComponent = new RealComponent();
      DecoratorPatternClient client = new DecoratorPatternClient(realComponent);
      client.execute(); 
   }
   
   @Test
   void decorator1() {
      Component realComponent = new RealComponent();
      Component messageDecorator = new MessageDecorator(realComponent);
      DecoratorPatternClient client = new DecoratorPatternClient(messageDecorator); client.execute();
   }
}
```
